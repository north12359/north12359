<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ARCHLINUX详细安装教程 | IN THE NORTH</title><meta name="author" content="在北方"><meta name="copyright" content="在北方"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言为防止makedown误转译 我将大部分的”_”转化成了”-“ 请大家分辨 关于archlinux以及基本要求Arch Linux 是一个轻量、灵活、滚动更新的 Linux 发行版，适合有时间、有兴趣、热爱自由的读者。由于 Arch Linux 仅提供了一个很简洁的安装环境，用户有极大的空间根据自己的喜好进行安装和配置，因此初学者往往感到难以适应。本文将详细地介绍一个通用的安装过程，尽可能遵循">
<meta property="og:type" content="article">
<meta property="og:title" content="ARCHLINUX详细安装教程">
<meta property="og:url" content="http://example.com/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="IN THE NORTH">
<meta property="og:description" content="前言为防止makedown误转译 我将大部分的”_”转化成了”-“ 请大家分辨 关于archlinux以及基本要求Arch Linux 是一个轻量、灵活、滚动更新的 Linux 发行版，适合有时间、有兴趣、热爱自由的读者。由于 Arch Linux 仅提供了一个很简洁的安装环境，用户有极大的空间根据自己的喜好进行安装和配置，因此初学者往往感到难以适应。本文将详细地介绍一个通用的安装过程，尽可能遵循">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img1.imgtp.com/2023/07/02/mIDFkDyH.png">
<meta property="article:published_time" content="2023-07-02T05:08:44.000Z">
<meta property="article:modified_time" content="2023-07-02T07:31:00.436Z">
<meta property="article:author" content="在北方">
<meta property="article:tag" content="教程">
<meta property="article:tag" content="ARCHLINUX">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img1.imgtp.com/2023/07/02/mIDFkDyH.png"><link rel="shortcut icon" href="/"><link rel="canonical" href="http://example.com/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":31,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":30,"languages":{"author":"作者: 在北方","link":"链接: ","source":"来源: IN THE NORTH","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ARCHLINUX详细安装教程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-02 15:31:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://gcore.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/macblack.css"><link rel="stylesheet" href="css/mobile.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="IN THE NORTH" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img1.imgtp.com/2023/06/30/5QU09lfp.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://img1.imgtp.com/2023/07/02/mIDFkDyH.png')"><nav id="nav"><span id="blog-info"><a href="/" title="IN THE NORTH"><span class="site-name">IN THE NORTH</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ARCHLINUX详细安装教程</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-02T05:08:44.000Z" title="发表于 2023-07-02 13:08:44">2023-07-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-02T07:31:00.436Z" title="更新于 2023-07-02 15:31:00">2023-07-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/archlinux/">archlinux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/archlinux/linux/">linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ARCHLINUX详细安装教程"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>为防止makedown误转译 我将大部分的”_”转化成了”-“ 请大家分辨</p>
<h3 id="关于archlinux以及基本要求"><a href="#关于archlinux以及基本要求" class="headerlink" title="关于archlinux以及基本要求"></a>关于archlinux以及基本要求</h3><p>Arch Linux 是一个轻量、灵活、滚动更新的 Linux 发行版，适合有时间、有兴趣、热爱自由的读者。由于 Arch Linux 仅提供了一个很简洁的安装环境，用户有极大的空间根据自己的喜好进行安装和配置，因此初学者往往感到难以适应。本文将详细地介绍一个通用的安装过程，尽可能遵循 ArchWiki 安装指南[1]。本文介绍了虚拟机安装、Windows 与 Arch Linux 双系统安装和全新安装 Arch Linux 三种方式。希望能帮助初学者顺利进入 Arch Linux 的世界</p>
<p>本教程要求：</p>
<ul>
<li>拥有一台以 UEFI 模式启动的 x86-64 架构电脑，目前运行 Windows 8 及以上操作系统</li>
</ul>
<ul>
<li>准备一个 U 盘，将 U 盘文件全部备份到电脑中</li>
</ul>
<ul>
<li>备份好电脑中全部资料，防止安装过程中误删分区（您可以在不经常使用的电脑上安装，更推荐第一次安装的读者在虚拟机中尝试）</li>
</ul>
<ul>
<li>对 Linux 有一定了解，使用过终端（命令行）</li>
</ul>
<p>如果遇到安装问题，请从以下界面获取帮助</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97">archwiki</a>i</li>
<li>搜索引擎</li>
<li><a target="_blank" rel="noopener" href="https://bbs.archlinux.org/">arch论坛</a></li>
<li><a target="_blank" rel="noopener" href="https://bbs.archlinuxcn.org/">arch中文论坛</a></li>
</ul>
<p><strong>如果您准备完毕的话，开始教程</strong></p>
<h2 id="获取安装镜像"><a href="#获取安装镜像" class="headerlink" title="获取安装镜像"></a>获取安装镜像</h2><p>个人推荐从北京外国语大学下载站进行安装 <a target="_blank" rel="noopener" href="https://mirrors.bfsu.edu.cn/archlinux/iso/latest/">北京外国语大学开源软件站ARCHLINUX</a><br>下载如下文件 <code>archlinux-2023.xx.xx-x86_64.iso</code></p>
<h2 id="验证安装镜像（可选）"><a href="#验证安装镜像（可选）" class="headerlink" title="验证安装镜像（可选）"></a>验证安装镜像（可选）</h2><p><em><strong>TIPS：如果不担心镜像被篡改 这一步可以跳过</strong></em><br>为确保下载的文件否被篡改以及是否损坏，需要计算文件的 SHA256 值。<br>在 Windows 系统中，打开镜像所在文件夹。按住 SHIFT 键的同时右键空白处，点击“在此处打开 PowerShell”。在打开的 PowerShell 窗口中，输入<code>certutil -hashfile .\archlinux-2023.xx.xx-x86_64.iso SHA256  #请将 2023.xx.xx 替换为镜像名中的日期</code><br>请在对应下载站中找到 sha256sums.txt 如果和上述命令输出的值相同，说明文件没有损坏；如果不同，请重新下载</p>
<h2 id="准备安装介质"><a href="#准备安装介质" class="headerlink" title="准备安装介质"></a>准备安装介质</h2><p><em><strong>TIPS:刷写过程会清空u盘请做好备份</strong></em><br>下载rufus写盘工具 <a target="_blank" rel="noopener" href="https://rufus.ie/downloads/">rufus</a><br>打开rufus 镜像选择下载好的镜像 设备选择插入的u盘 点击开始 等待刷写完毕</p>
<h2 id="双系统安装前提（可选）"><a href="#双系统安装前提（可选）" class="headerlink" title="双系统安装前提（可选）"></a>双系统安装前提（可选）</h2><p>如果您希望即将安装的 Arch Linux 与已有的 Windows 共存，请继续阅读；如果您希望只保留新安装的 Arch Linux，删除现有的 Windows 系统，请跳过此步。</p>
<ol>
<li>磁盘分区<br>请按照此教程，压缩磁盘空间用于 Arch Linux 安装（保持空闲状态，不用分区）。推荐保留 50GiB 的空间，至少 30GiB。如果您有两块硬盘，请在固态硬盘中压缩出至少 20GiB 空间，机械硬盘中尽可能多的压缩空间<br>请参考该文章 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/145420256">磁盘分区</a></li>
<li>关闭安全启动<br>由于预装 Windows 的电脑默认开启安全启动，但是 Arch Linux 默认不支持安全启动，因此我们需要提前关闭该功能。关闭后，Bitlocker 功能将无法使用，请提前关闭该功能。首先，我们进入 BIOS。您可以在启动电脑的过程中通过不断按相应快捷键进入 BIOS，具体的快捷键可以在搜索引擎中查找。如果您不知道快捷键，请使用如下方法。在 Windows 系统中，点击“开始”菜单，点击“设置”按钮，进入设置页面。点击“更新和安全”，在左侧点击“恢复”选项卡，在右侧点击“高级启动”栏目下的“立即重新启动”按钮。重新启动后，点击“疑难解答”，再点击“高级选项”，最后点击“UEFI 固件设置”，点击“重启”即可。然后，我们关闭安全启动。不同品牌的电脑的 BIOS 页面相差较大，进入之后，您可以在“设置”或“安全”选项卡下找到“安全启动”项目，将其设置为关闭。<br>最后，在 BIOS 中选择保存并重启，即可。</li>
<li>关闭休眠<br>Windows 默认启动“快速启动”功能，该功能影响 Arch Linux 的使用，可能导致磁盘文件丢失，我们需要将其关闭。为了彻底关闭该功能，本教程将休眠功能也一起关闭。右键“开始”菜单，点击“Windows Powershell（管理员）”，打开管理员权限的 Powershell 窗口。输入下列命令，按下 Enter 键即可<br> <code>powercfg -h off</code></li>
<li>时间设置<br>Windows 使用本地时间作为硬件时间，我们将其改为 UTC 时间，与 Arch Linux 统一。右键“开始”菜单，点击“Windows Powershell（管理员）”，打开管理员权限的 Powershell 窗口。输入下列命令，按下 Enter 键。<br> <code>reg add &quot;HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\TimeZoneInformation&quot; /v RealTimeIsUniversal /d 1 /t REG_DWORD /f</code></li>
</ol>
<h2 id="启动安装环境"><a href="#启动安装环境" class="headerlink" title="启动安装环境"></a>启动安装环境</h2><p>请参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38711818/article/details/116161146">各品牌主板、笔记本、台式机启动快捷键</a>寻找您电脑快捷键，插好 U 盘，重启电脑，连续按该按键，直到出现启动列表，选择您的 U 盘。在弹出的 Ventoy 界面中，选择您刚刚下载的镜像名称项。在随后弹出的 GRUB 引导界面中，选择第一项”Arch Linux install medium (x86-64, UEFI)” 出现”root@archiso”为成功进入</p>
<h2 id="验证启动方式"><a href="#验证启动方式" class="headerlink" title="验证启动方式"></a>验证启动方式</h2><p>本文开始时提到，您的电脑必须在 UEFI 模式下启动，现在验证您的启动模式。</p>
<p>请输入如下命令 <code>ls /sys/firmware/efi/efivars</code><br>如果有大量输出，说明您的电脑处于 UEFI 模式；如果有类似于如下的输出，说明您的电脑处于 BIOS 模式。<br><code>ls: cannot access &#39;/sys/firmware/efi/efivars&#39;: No such file or directory</code><br>处于 BIOS 启动模式的朋友，可以自行进入 BIOS 页面更改启动模式。如果无法更改，那么本文无法指导您继续安装，请您参考其他教程，例如<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8f4ecf695454">bios安装archlinux</a></p>
<h2 id="连接互联网"><a href="#连接互联网" class="headerlink" title="连接互联网"></a>连接互联网</h2><p>Arch Linux 镜像只提供一个基本的安装环境，软件包仍需要连接互联网后下载。连接互联网有多种方式，包括</p>
<ul>
<li>有线</li>
<li>wifi</li>
<li>usb以及蓝牙共享<br> 选择有线连接和手机 USB 网络共享的读者，只需要将网线或数据线插到电脑相应接口即可连接。以下详细介绍连接 WiFi 的方法。使用以下命令检查确保网络接口已经启用。<code>ip link</code><br> 使用iwctl链接WIFI <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@archiso ~ # iwctl</span><br><span class="line">NetworkConfigurationEnabled: disabled</span><br><span class="line">StateDirectory: /var/lib/iwd</span><br><span class="line">Version: 1.xx</span><br><span class="line">[iwd]#</span><br></pre></td></tr></table></figure>
如果您看到上述输出，说明您已经进入了 iwd 程序环境。这时读者可能会觉得陌生，因为通常的命令下达后会直接输出结果，并返回命令提示符，等待下一个命令的输入。而这个命令不同，下达之后进入了程序环境，用户只能与该程序交互，这一点请初学者牢记。</li>
</ul>
<p>若想退出 iwd 程序环境，只需要输入 quit 即可。</p>
<p>继续输入 <code>device list</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[iwd]# device list</span><br><span class="line">                       Devices</span><br><span class="line">                       ------------------------------------------------------</span><br><span class="line">                       Name   Address            Powered  Adapter  Mode</span><br><span class="line">                       ------------------------------------------------------</span><br><span class="line">                       wlan0  xx:xx:xx:xx:xx:xx  on       phy0     station</span><br></pre></td></tr></table></figure>
<p>请记住上述输出的设备名称（在 Name 下面），这里以 wlan0 为例，请将 wlan0 换成您的设备名称。</p>
<p>继续输入命令</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[iwd]# station wlan0 scan  # 扫描网络，请将 wlan0 换成您的设备名称</span><br><span class="line">[iwd]# station wlan0 get-networks  # 输出扫描结果，请将 wlan0 换成您的设备名称</span><br><span class="line">         Available Networks</span><br><span class="line">         ------------------------------------</span><br><span class="line">         Network name    Security    Signal</span><br><span class="line">         ------------------------------------</span><br><span class="line">         mySSID          psk         ****</span><br></pre></td></tr></table></figure>
<p>请记住您的网络名称（在 Network name 下面），这里以 mySSID 为例，请将 mySSID 换成您的网络名称</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[iwd]# station wlan0 connect &quot;mySSID&quot;  # 连接网络，请将 wlan0 换成您的设备名称，mySSID 换成您的网络名称</span><br><span class="line">Type the network passphrase for mySSID psk.</span><br><span class="line">Passphrase: ********  # 输入密码</span><br><span class="line">[iwd]# quit  # 退出 iwd 程序环境</span><br></pre></td></tr></table></figure>
<p>使用 <code>ping archlinux.org</code>测试链接 使用ctrl+c停止</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@archiso ~ # ping archlinux.org</span><br><span class="line">PING archlinux.org (95.217.163.246) 56(84) bytes of data.</span><br><span class="line">64 bytes from archlinux.org (95.217.163.246): icmp-seq=1 ttl=47 time=201 ms</span><br><span class="line">64 bytes from archlinux.org (95.217.163.246): icmp-seq=2 ttl=47 time=218 ms</span><br><span class="line">64 bytes from archlinux.org (95.217.163.246): icmp-seq=3 ttl=47 time=194 ms</span><br><span class="line">^C  # 使用 Ctrl+C 中止命令</span><br><span class="line">--- archlinux.org ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2001 ms</span><br><span class="line">rtt min/avg/max/mdev = 194.013/204.384/217.666/9.873 ms</span><br></pre></td></tr></table></figure>
<p>如果出现上述结果，说明网络连接成功。如果无法连接 WiFi，请按照 ArchWiki检查互联网连接。由于驱动不匹配，有些电脑可能无法连接 WiFi，请使用有线连接或手机 USB 共享网络。</p>
<h2 id="更新系统时钟"><a href="#更新系统时钟" class="headerlink" title="更新系统时钟"></a>更新系统时钟</h2><p>在互联网连接之后，systemd-timesyncd 服务将自动校准系统时间。请输入如下命令确定时间的准确性。<br><code>timedatectl</code> 时间可能以 UTC 时区显示，比北京时间慢 8 小时。这是正常现象，无需调整</p>
<h2 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h2><p><em><strong>tips</strong></em></p>
<ul>
<li>从未进行过磁盘分区操作的读者请先在虚拟机内练习</li>
<li>请您务必提前备份好重要资料</li>
<li>请您确保知晓命令的含义，并正确输入命令，否则有可能造成数据丢失</li>
</ul>
<ol>
<li>全新安装archlinux的磁盘分区<br>注意：继续操作将清除硬盘内全部数据 如果需要双系统 跳过这一步</li>
</ol>
<p>|挂载点|分区|分区类型|建议大小|备注|<br>|—|<br>|mnt&#x2F;boot|&#x2F;dev&#x2F;sda1或&#x2F;dev&#x2F;nvme0n1p1|Efi system|512mib|Esp分区|<br>|mnt|&#x2F;dev&#x2F;sda2或&#x2F;dev&#x2F;nvme0n1p2|linux x86-64 root|100gib(至少30gib)|arch根分区|<br>|mnt&#x2F;home|&#x2F;dev&#x2F;sda3&#x2F;或&#x2F;dev&#x2F;nvme0n1p3|linux home|剩余空间|archlinux的home分区|<br>首先使用 <code>lsblk</code> 或 <code>fdisk -l</code> 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root@archiso ~ # lsblk</span><br><span class="line">NAME           MAJ:MIN  RM    SIZE  RO  TYPE  MOUNTPOINT</span><br><span class="line">loop0            7:0     0  688.2M   1  loop  /run/archiso/airootfs  # loop0 可以忽略</span><br><span class="line">sda              8:0     0  931.5G   0  disk  # sda 是要安装 Arch Linux 的硬盘，请记住设备名</span><br><span class="line">├─sda1           8:1     0    512M   0  part</span><br><span class="line">└─sda2           8:2     0    931G   0  part</span><br><span class="line">sdb              8:16    1   59.8G   0  disk  # sdb 是 U 盘，请忽略</span><br><span class="line">├─sdb1           8:17    1   59.7G   0  part</span><br><span class="line">│   └ventoy    254:0     0  861.3M   1  dm    /run/archiso/bootmnt</span><br><span class="line">└─sdb2           8:18    1     32M   0  part</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，以 rom， loop， airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。找到要进行分区的设备之后，请记住设备名（以 &#x2F;dev&#x2F;sda 为例，您的硬盘也可能是 &#x2F;dev&#x2F;nvme0n1）。</p>
<p>我们使用的分区工具是 fdisk，首先让我们学习一下 fdisk 的用法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line">Generic</span><br><span class="line">   d   delete a partition  # 输入 d 删除分区</span><br><span class="line">   n   add a new partition  # 输入 n 创建分区</span><br><span class="line">   p   print the partition table  # 输入 p 打印分区表</span><br><span class="line">   t   change a partition type  # 输入 t 改变分区类型</span><br><span class="line">              …</span><br><span class="line">   Save &amp; Exit</span><br><span class="line">   w   write table to disk and exit  # 输入 w 写入并退出（写入后不可撤销，请谨慎使用）</span><br><span class="line">   q   quit without saving changes  # 输入 q 不保存退出</span><br><span class="line">                        …</span><br><span class="line">Create a new label</span><br><span class="line">   g   create a new empty GPT partition table  # 输入 g 创建 GPT 分区表</span><br><span class="line"></span><br><span class="line">我们现在正式进行磁盘分区。首先需要创建 GPT 分区表；随后依次创建分区，并修改分区类型；最后保存并退出。请参考以下分区过程，按照您的分区方案进行分区。</span><br></pre></td></tr></table></figure>
<p>root@archiso ~ # fdisk &#x2F;dev&#x2F;sda  # 请将 sda 更换为您的设备名，如 nvme0n1</p>
<p>Welcome to fdisk (util-linux 2.xx).<br>Changes will remain in memory only, until you decide to write them.<br>Be careful before using the write command.</p>
<p>Command (m for help): g  # 输入 g 创建新的 GPT 分区表（请勿遗忘此步，否则您的硬盘将是 MBR 格式）<br>Created a new GPT disklabel (GUID: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).</p>
<p>Command (m for help): n  # 输入 n 创建新的分区，这个分区将是 EFI 分区<br>Partition number (1-128, default 1):  # 分区编号保持默认，直接按 Enter<br>First sector (2048-125829086, default 2048):  # 第一个扇区，保持默认<br>Last sector, +&#x2F;-sectors or +&#x2F;-size{K,M,G,T,P} (2048-125829086, default 125827071): +512M  # 创建 512MiB 大小的分区</p>
<p>Created a new partition 1 of type ‘Linux filesystem’ and of size 512 MiB.<br>Partition #1 contains a vfat signature.</p>
<p>Do you want to remove the signature? [Y]es&#x2F;[N]o: Y  # 清除已有的签名，如果是全新的硬盘，则没有此步</p>
<p>The signature will be removed by a write command.</p>
<p>Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步<br>Selected partition 1<br>Partition type or alias (type L to list all): 1  # 输入 1 代表 EFI 类型<br>Changed type of partition ‘Linux filesystem’ to ‘EFI System’.</p>
<p>Command (m for help): n  # 创建第二个分区，用作根分区<br>Partition number (2-128, default 2):   # 保持默认<br>First sector (1050624-125829086, default 1050624):   # 保持默认<br>Last sector, +&#x2F;-sectors or +&#x2F;-size{K,M,G,T,P} (1050624-125829086, default 125827071): +100G  # 创建 100 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小</p>
<p>Created a new partition 2 of type ‘Linux filesystem’ and of size 100 GiB.<br>Partition #2 contains a ntfs signature.</p>
<p>Do you want to remove the signature? [Y]es&#x2F;[N]o: Y</p>
<p>The signature will be removed by a write command.</p>
<p>Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步<br>Partition number (1-2, default 2):   # 保持默认<br>Partition type or alias (type L to list all): 23  # 输入 23 代表 Linux root (x86-64) 类型<br>Changed type of partition ‘Linux filesystem’ to ‘Linux root (x86-64)’.</p>
<p>Command (m for help): n  # 创建第三个分区，用作 home 分区<br>Partition number (3-128, default 3):   # 保持默认<br>First sector (42993664-125829086, default 42993664):   # 保持默认<br>Last sector, +&#x2F;-sectors or +&#x2F;-size{K,M,G,T,P} (42993664-125829086, default 125827071):   #保持默认，将剩余空间全部分给 home 分区</p>
<p>Created a new partition 3 of type ‘Linux filesystem’ and of size 39.5 GiB.</p>
<p>Command (m for help): t  # 输入 t 改变分区类型<br>Partition number (1-3, default 3):<br>Partition type or alias (type L to list all): 42  # 输入 42 代表 Linux home 类型<br>Changed type of partition ‘Linux filesystem’ to ‘Linux home’.</p>
<p>Command (m for help): p  # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出<br>Disk &#x2F;dev&#x2F;sda: 60 GiB, 64424509440 bytes, 125829120 sectors<br>Disk model: xxx<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 4096 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 4096 bytes &#x2F; 4096 bytes<br>Disklabel type: gpt<br>Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</p>
<p>Device        Start        End   Sectors   Size  Type<br>&#x2F;dev&#x2F;sda1      2048    1050623   1048576   512M  EFI System<br>&#x2F;dev&#x2F;sda2   1050624   42993663  41943040   100G  Linux root (x86-64)<br>&#x2F;dev&#x2F;sda3  42993664  125827071  82833408  39.5G  Linux home</p>
<p>Filesystem&#x2F;RAID signature on partition 1 will be wiped.<br>Filesystem&#x2F;RAID signature on partition 2 will be wiped.</p>
<p>Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复<br>The partition table has been altered.<br>Calling ioctl() to re-read partition table.<br>Syncing disks.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">2. windows和archlinux双系统</span><br><span class="line">磁盘分区表，此分区表参考微软的 UEFI/GPT 硬盘推荐分区</span><br><span class="line">|挂载点|分区|分区类型|建议大小|备注|</span><br><span class="line">|efi|/dev/sda1或/dev/nvme0n1p1|efi system|260mib|esp分区|</span><br><span class="line">|Windows分区|略|microsoft basic data|略|Windows盘|</span><br><span class="line">|mnt|/dev/sda5或/dev/nvme0n1p5|linux x86-64 root|500gib(可调整最低30gib)|archlinux根分区|</span><br><span class="line">|mnt/home|/dev/sda5或/dev/nvme0n1p5/|linux home|剩余空间|archlinux home分区|</span><br><span class="line">首先使用 `lsblk` 或 `fdisk -l` 查看分区信息。您将看到许多设备，请注意根据容量大小和分区数量进行区分，例如</span><br></pre></td></tr></table></figure>
<p>root@archiso ~ # lsblk<br>NAME           MAJ:MIN  RM    SIZE  RO  TYPE  MOUNTPOINT<br>loop0            7:0     0  688.2M   1  loop  &#x2F;run&#x2F;archiso&#x2F;airootfs  # loop0 可以忽略<br>sda              8:0     0  931.5G   0  disk  # sda 是要安装 Arch Linux 的硬盘，请记住设备名<br>├─sda1           8:1     0    260M   0  part<br>├─sda2           8:2     0     16M   0  part<br>├─sda3           8:3     0     50G   0  part<br>└─sda4           8:4     0     50G   0  part<br>sdb              8:16    1   59.8G   0  disk  # sdb 是 U 盘，请忽略</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在上面的例子中，以 rom， loop， airoot 结尾的设备可以忽略；sda 是要安装 Arch Linux 的硬盘，请记住这个设备名；根据容量可以判断出 sdb 是 U 盘，请忽略。根据微软的 UEFI/GPT 硬盘推荐分区[15]，我们有 Windows 为您分好的 260 MiB 大小的 EFI 分区和 16 MiB 大小的 MSR 分区，以及 50 GiB 大小的 C 盘和 D 盘。现在我们开始分区。不需要创建 GPT 分区表，也不需要创建 EFI 分区，只需创建根分区和 home 分区。参考如下</span><br></pre></td></tr></table></figure>
<p>root@archiso ~ # fdisk &#x2F;dev&#x2F;sda  # 请将 sda 更换为您的设备名，如 nvme0n1</p>
<p>Welcome to fdisk (util-linux 2.xx).<br>Changes will remain in memory only, until you decide to write them.<br>Be careful before using the write command.</p>
<p>Command (m for help): p  # 输入 p 打印分区表，检查已有的分区。我们有 260 MiB 大小的 EFI 分区和 16 MiB 大小的 MSR 分区，以及 50 GiB 大小的 C 盘和 D 盘</p>
<p>Disk &#x2F;dev&#x2F;sda: 150.6 GiB, 161705518592 bytes, 315831091 sectors<br>Disk model: xxx<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 4096 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 4096 bytes &#x2F; 4096 bytes<br>Disklabel type: gpt<br>Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</p>
<p>Device        Start        End   Sectors   Size  Type<br>&#x2F;dev&#x2F;sda1      2048     534527    532480   260M  EFI System<br>&#x2F;dev&#x2F;sda2    534528     567295     32768    16M  Microsoft reserved<br>&#x2F;dev&#x2F;sda3    567296  105424895 104857600    50G  Microsoft basic data<br>&#x2F;dev&#x2F;sda4 105424896  210282495 104857600    50G  Microsoft basic data</p>
<p>Command (m for help): n  # 输入 n 创建新的分区，这个分区将是根分区<br>Partition number (5-128, default 5):  # 分区编号保持默认，直接按 Enter<br>First sector (210282496-315831057, default 210282496):  # 第一个扇区，保持默认<br>Last sector, +&#x2F;-sectors or +&#x2F;-size{K,M,G,T,P} (210282496-315831057, default 315831057): +50G  # 创建 50 GiB 大小的根分区，您可以根据自己的硬盘空间决定根分区的大小</p>
<p>Created a new partition 5 of type ‘Linux filesystem’ and of size 50 GiB.</p>
<p>Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步<br>Partition number (1-5, default 5):   # 保持默认<br>Partition type or alias (type L to list all): 23  # 输入 23 代表 Linux root (x86-64) 类型<br>Changed type of partition ‘Linux filesystem’ to ‘Linux root (x86-64)’.</p>
<p>Command (m for help): n  # 输入 n 创建新的分区，这个分区将是 home 分区<br>Partition number (6-128, default 6):   # 保持默认<br>First sector (252225536-315831057, default 252225536):   # 保持默认<br>Last sector, +&#x2F;-sectors or +&#x2F;-size{K,M,G,T,P} (252225536-315831057, default 315831057):   # 保持默认，将剩余空间全部分给 home 分区</p>
<p>Created a new partition 6 of type ‘Linux filesystem’ and of size 30.3 GiB.</p>
<p>Command (m for help): t  # 输入 t 改变分区类型<br>Partition number (1-6, default 6):   # 保持默认<br>Partition type or alias (type L to list all): 42  # 输入 42 代表 Linux home 类型<br>Changed type of partition ‘Linux filesystem’ to ‘Linux home’.</p>
<p>Command (m for help): p  # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出</p>
<p>Disk &#x2F;dev&#x2F;sda: 150.6 GiB, 161705518592 bytes, 315831091 sectors<br>Disk model: xxx<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 4096 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 4096 bytes &#x2F; 4096 bytes<br>Disklabel type: gpt<br>Disk identifier: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</p>
<p>Device        Start        End   Sectors   Size  Type<br>&#x2F;dev&#x2F;sda1      2048     534527    532480   260M  EFI System<br>&#x2F;dev&#x2F;sda2    534528     567295     32768    16M  Microsoft reserved<br>&#x2F;dev&#x2F;sda3    567296  105424895 104857600    50G  Microsoft basic data<br>&#x2F;dev&#x2F;sda4 105424896  210282495 104857600    50G  Microsoft basic data<br>&#x2F;dev&#x2F;sda5 210282496  252225535  41943040    50G  Linux root (x86-64)<br>&#x2F;dev&#x2F;sda6 252225536  315830271  63604736  30.3G  Linux home</p>
<h2 id="Command-m-for-help-w-输入-w-写入分区表，该操作不可恢复The-partition-table-has-been-altered-Calling-ioctl-to-re-read-partition-table-Syncing-disks-mkswap-U-clear-x2F-mnt-x2F-swapfileswapon-x2F-mnt-x2F-swapfile-root-archiso-passwdNew-password-请输入密码，这里不会显示“-”，这是正常现象Retype-new-password-passwd-password-updated-successfully-96-96-96-安装微码"><a href="#Command-m-for-help-w-输入-w-写入分区表，该操作不可恢复The-partition-table-has-been-altered-Calling-ioctl-to-re-read-partition-table-Syncing-disks-mkswap-U-clear-x2F-mnt-x2F-swapfileswapon-x2F-mnt-x2F-swapfile-root-archiso-passwdNew-password-请输入密码，这里不会显示“-”，这是正常现象Retype-new-password-passwd-password-updated-successfully-96-96-96-安装微码" class="headerlink" title="Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复The partition table has been altered.Calling ioctl() to re-read partition table.Syncing disks.mkswap -U clear &#x2F;mnt&#x2F;swapfileswapon &#x2F;mnt&#x2F;swapfile[root@archiso ~]# passwdNew password:  # 请输入密码，这里不会显示“*”，这是正常现象Retype new password:passwd: password updated successfully&#96;&#96;&#96;安装微码"></a>Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复<br>The partition table has been altered.<br>Calling ioctl() to re-read partition table.<br>Syncing disks.<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">分区格式化</span><br><span class="line">-----------</span><br><span class="line">创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4，btrfs，xfs 等。第一次安装的读者，建议使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。</span><br><span class="line">1. 全新安装格式化</span><br><span class="line">使用 mkfs.ext4将您的根分区和home分区格式化为 ext4 文件系统。请将 /dev/sdaxx 更换为您的 root 分区名，可能是 /dev/nvme0n1pxxx。</span><br><span class="line">格式为`mkfs.ext4 /dev/xxxxx(分区信息)</span><br><span class="line"></span><br><span class="line">使用 mkfs.fat 将您的 EFI 分区格式化为 FAT32 文件系统。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。</span><br><span class="line">格式为`mkfs.fat -F 32 /dev/xxxxx(分区信息)</span><br><span class="line">2. 双系统格式化</span><br><span class="line">***tips 格式化格式参照上条***</span><br><span class="line">使用 mkfs.ext4[16] 将您的根分区格式化为 ext4 文件系统。请将 /dev/sda5 更换为您的 root 分区名，可能是 /dev/nvme0n1p5 如果您忘记了 root 分区名，请输入 fdisk -l。在 Type 一栏里找到 Linux root(x86-64) 对应的 Device 名称。</span><br><span class="line">使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 /dev/sda6 更换为您的 home 分区名，可能是 /dev/nvme0n1p6。</span><br><span class="line">果您忘记了 home 分区名，请输入 fdisk -l。在 Type 一栏里找到 Linux home 对应的 Device 名称。</span><br><span class="line"></span><br><span class="line">挂载分区</span><br><span class="line">-------</span><br><span class="line">1. 全新安装</span><br><span class="line">使用 mount将根分区挂载在 /mnt 目录下。挂载需要遵循一定的顺序，要先挂载根分区，请注意。</span><br><span class="line"></span><br><span class="line">请将 /dev/sda2 更换为您的 root 分区名，可能是 /dev/nvme0n1p2</span><br><span class="line">格式为`mount /dev/xxxx /mnt`</span><br><span class="line">随后，使用 mount --mkdir 创建 /mnt/boot 目录，并将 EFI 分区挂载在 /mnt/boot 目录下。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。</span><br><span class="line">格式为`mount --mkdir /dev/xxxxx /mnt/boot`</span><br><span class="line">此处，也可以使用 /mnt/efi 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。</span><br><span class="line">最后，挂载 home 分区。请将 /dev/sda5 更换为您的 home 分区名，可能是 /dev/nvme0n1p3。</span><br><span class="line">格式为`mount --mkdir /dev/xxx /mnt/home`</span><br><span class="line">2. 双系统挂载</span><br><span class="line">使用 mount将根分区挂载在 /mnt 目录下。挂载需要遵循一定的顺序，要先挂载根分区，请注意。</span><br><span class="line"></span><br><span class="line">请将 /dev/sda5 更换为您的 root 分区名，可能是 /dev/nvme0n1p5</span><br><span class="line">格式为`mount /dev/xxx /mnt`</span><br><span class="line">随后，使用 mount --mkdir 创建 /mnt/efi 目录，并将 EFI 分区挂载在 /mnt/efi 目录下。这里不选择挂载点为 /mnt/boot 的目的是减小磁盘空间占用，但是您将只能选择特定的引导程序，如 GRUB。请将 /dev/sda1 更换为您的 EFI 分区名，可能是 /dev/nvme0n1p1。</span><br><span class="line">格式为`mount --mkdir /dev/xxx /mnt/efi`</span><br><span class="line">此处，也可以使用 /mnt/boot 作为挂载点，具体的区别见 ArchWiki。</span><br><span class="line">最后，挂载 home 分区。请将 /dev/sda6 更换为您的 home 分区名，可能是 /dev/nvme0n1p6。</span><br><span class="line">格式为`mount --mkdir /dev/xxx /mnt/home`</span><br><span class="line"></span><br><span class="line">建立交换文件</span><br><span class="line">-------------</span><br><span class="line">交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，有部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读 交换文件的大小是个众说纷纭的问题。笔者根据 RedHat 文档，推荐的交换文件大小见下表，笔者使用的公式是</span><br><span class="line">**交换文件大小=2√2x内存大小**</span><br><span class="line">建立交换文件的具体操作方法如下。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （=8192 MiB）大小的交换文件</span><br><span class="line">`dd if=/dev/zero of=/mnt/swapfile bs=1M count=8192 status=progress`</span><br><span class="line">如果您需要创建其他大小的交换文件，请将 count= 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。</span><br><span class="line"></span><br><span class="line">然后，修改权限</span><br><span class="line">`chmod 0600 /mnt/swapfile`</span><br><span class="line">最后 格式化并启用swap</span><br></pre></td></tr></table></figure><br>mkswap -U clear &#x2F;mnt&#x2F;swapfile<br>swapon &#x2F;mnt&#x2F;swapfile<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">安装基础包</span><br><span class="line">---------</span><br><span class="line">终于到了安装环节。我们使用 pacstrap 安装 base，linux，linux-firmware 三个软件包，它们分别是基础包组，linux 内核和驱动程序。此外，如果您使用 2019 年及以后生产的笔记本电脑，可能需要安装 sof-firmware，否则可能没有声音。</span><br><span class="line"></span><br><span class="line">Arch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核，但是对于初学者，只推荐使用 linux 内核。</span><br><span class="line">`pacstrap -K /mnt base linux linux-firmware`</span><br><span class="line"></span><br><span class="line">生成fstab `genfstab -U /mnt &gt;&gt; /mnt/etc/fstab` 记得用cat指令检查是否正确 `cat /mnt/etc/fstab`</span><br><span class="line"></span><br><span class="line">进入archlinux</span><br><span class="line">--------------</span><br><span class="line">我们使用 arch-chroot 工具切换到新安装的系统，以后的操作就可以在新安装的系统中完成了</span><br><span class="line">`arch-chroot /mnt`</span><br><span class="line"></span><br><span class="line">设置时区和硬件时间</span><br><span class="line">------------------</span><br><span class="line">时区: `ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime`</span><br><span class="line">硬件时间: `hwclock --systohc`</span><br><span class="line"></span><br><span class="line">更改 /etc/locale.gen</span><br><span class="line">--------------------</span><br><span class="line">安装vim  `pacman -S vim`</span><br><span class="line">文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。</span><br><span class="line"></span><br><span class="line">首先输入“/”，进入搜索功能，输入“en-US.UTF-8”，我们找到了以下一行。</span><br><span class="line"></span><br><span class="line">#en-US.UTF-8 UTF-8</span><br><span class="line">按下Enter，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。</span><br><span class="line"></span><br><span class="line">en-US.UTF-8 UTF-8</span><br><span class="line">再一次输入“/”，进入搜索功能，输入“zh-CN.UTF-8”，按下Enter。按方向左键，再输入“x”，将“#”删除。</span><br><span class="line"></span><br><span class="line">zh-CN.UTF-8 UTF-8</span><br><span class="line">随后输入“:”，进入命令模式，输入“wq”，按下Enter，保存并退出 vim 软件环境。</span><br><span class="line">输入如下命令生成locale `locale-gen`</span><br><span class="line">我们再使用 vim 创建并编辑 locale.conf，设置 locale `vim /etc/locale.conf`</span><br><span class="line">这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下“i”键，进入插入模式。请输入如下字符。</span><br><span class="line"></span><br><span class="line">LANG=en-US.UTF-8</span><br><span class="line">然后按 Esc，退出插入模式。再输入“:”，进入命令模式，输入“wq”，按下Enter，保存并退出 vim 软件环境。</span><br><span class="line"></span><br><span class="line">网络配置</span><br><span class="line">---------</span><br><span class="line">请编辑 hostname文件，设置主机名，这将成为您计算机的名字</span><br><span class="line">`vim /etc/hostname`</span><br><span class="line"></span><br><span class="line">然后，请安装一个网络管理器，笔者推荐使用 NetworkManager</span><br><span class="line">`pacman -S networkmanager`</span><br><span class="line">NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在我们使用 systemd 设置 NetworkManager 开机自动启动。</span><br><span class="line">`systemctl enable NetworkManager.service`</span><br><span class="line"></span><br><span class="line">设置ROOT密码</span><br><span class="line">-----------</span><br><span class="line">&gt; root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码</span><br><span class="line"></span><br><span class="line">请输入如下命令设置密码</span><br><span class="line">***tips:输入的密码不会显示***</span><br></pre></td></tr></table></figure><br>[root@archiso ~]# passwd<br>New password:  # 请输入密码，这里不会显示“*”，这是正常现象<br>Retype new password:<br>passwd: password updated successfully<br>&#96;&#96;&#96;<br>安装微码</h2><p>如果你是intel处理器 输入如下指令 <code>pacman -S intel-ucode</code><br>如果你是amd处理器 输入如下指令 <code>pacman -S amd-ucode</code></p>
<h2 id="Arch引导程序的安装"><a href="#Arch引导程序的安装" class="headerlink" title="Arch引导程序的安装"></a>Arch引导程序的安装</h2><ol>
<li>单系统<br>输入如下指令安装基础包 <code>pacman -S grub efibootmgr</code><br>安装到计算机 <code>grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB</code><br>报告”Installation finished. No error reported”即为成功 直接生成grub配置 <code>grub-mkconfig -o /boot/grub/grub.cfg</code></li>
<li>双系统<br>输入以下命令安装基础包 <code>pacman -S grub efibootmgr os-prober</code><br>安装至计算机 <code>grub-install --target=x86_64-efi --efi-directory=/efi --bootloader-id=GRUB</code><br>配置os prober检测Windows <code>vim /etc/default/grub</code><br>搜索“GRUB-DISABLE-OS-PROBER&#x3D;false”一行，并去掉这行开头的“#”。保存并退出。</li>
</ol>
<p>最后生成 GRUB 配置，即可。</p>
<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><p>退出chroot <code>exit</code><br>关闭交换文件 <code>swapoff /mnt/swapfile</code><br>解除挂载 <code>umount -R /mnt</code><br>重启 <code>reboot</code></p>
<p>至此，一个基本的 Arch Linux 系统已经安装完毕。现在您可以通过终端控制系统。我们将在下一篇文章中介绍安装后的配置，包括普通用户的创建、显卡驱动和图形界面的安装。敬请关注</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">在北方</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">http://example.com/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">IN THE NORTH</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">教程</a><a class="post-meta__tags" href="/tags/ARCHLINUX/">ARCHLINUX</a></div><div class="post_share"><div class="social-share" data-image="https://img1.imgtp.com/2023/07/02/mIDFkDyH.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2023/07/01/TERMUX%E9%83%A8%E7%BD%B2HEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2-%E4%B8%AD/" title=""><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info"></div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/07/01/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2-%E4%B8%AD/" title="TERMUX搭建HEXO以及后续部署(中)"><img class="cover" src="https://img1.imgtp.com/2023/06/30/vD82wXZj.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-01</div><div class="title">TERMUX搭建HEXO以及后续部署(中)</div></div></a></div><div><a href="/2023/06/30/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TERMUX搭建HEXO以及后续部署（上）"><img class="cover" src="https://img1.imgtp.com/2023/06/30/vD82wXZj.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-30</div><div class="title">TERMUX搭建HEXO以及后续部署（上）</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img1.imgtp.com/2023/06/30/5QU09lfp.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">在北方</div><div class="author-info__description">生而自由，爱而无畏</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://img1.imgtp.com/2023/06/30/v6CtKTDh.jpeg" target="_blank" title=""><i class="favicon"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客 玩的开心</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Earchlinux%E4%BB%A5%E5%8F%8A%E5%9F%BA%E6%9C%AC%E8%A6%81%E6%B1%82"><span class="toc-text">关于archlinux以及基本要求</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F"><span class="toc-text">获取安装镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-text">验证安装镜像（可选）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%AE%89%E8%A3%85%E4%BB%8B%E8%B4%A8"><span class="toc-text">准备安装介质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E5%89%8D%E6%8F%90%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-text">双系统安装前提（可选）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="toc-text">启动安装环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">验证启动方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E4%BA%92%E8%81%94%E7%BD%91"><span class="toc-text">连接互联网</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9F"><span class="toc-text">更新系统时钟</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-text">磁盘分区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Command-m-for-help-w-%E8%BE%93%E5%85%A5-w-%E5%86%99%E5%85%A5%E5%88%86%E5%8C%BA%E8%A1%A8%EF%BC%8C%E8%AF%A5%E6%93%8D%E4%BD%9C%E4%B8%8D%E5%8F%AF%E6%81%A2%E5%A4%8DThe-partition-table-has-been-altered-Calling-ioctl-to-re-read-partition-table-Syncing-disks-mkswap-U-clear-x2F-mnt-x2F-swapfileswapon-x2F-mnt-x2F-swapfile-root-archiso-passwdNew-password-%E8%AF%B7%E8%BE%93%E5%85%A5%E5%AF%86%E7%A0%81%EF%BC%8C%E8%BF%99%E9%87%8C%E4%B8%8D%E4%BC%9A%E6%98%BE%E7%A4%BA%E2%80%9C-%E2%80%9D%EF%BC%8C%E8%BF%99%E6%98%AF%E6%AD%A3%E5%B8%B8%E7%8E%B0%E8%B1%A1Retype-new-password-passwd-password-updated-successfully-96-96-96-%E5%AE%89%E8%A3%85%E5%BE%AE%E7%A0%81"><span class="toc-text">Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复The partition table has been altered.Calling ioctl() to re-read partition table.Syncing disks.分区格式化-----------创建好的分区必须格式化为一种文件系统，Linux 上常见的文件系统有 ext4，btrfs，xfs 等。第一次安装的读者，建议使用 ext4 文件系统。btrfs 提供子卷、写时复制、压缩、快照等高级功能，适合更加熟练的用户。1. 全新安装格式化使用 mkfs.ext4将您的根分区和home分区格式化为 ext4 文件系统。请将 &#x2F;dev&#x2F;sdaxx 更换为您的 root 分区名，可能是 &#x2F;dev&#x2F;nvme0n1pxxx。格式为&#96;mkfs.ext4 &#x2F;dev&#x2F;xxxxx(分区信息)使用 mkfs.fat 将您的 EFI 分区格式化为 FAT32 文件系统。请将 &#x2F;dev&#x2F;sda1 更换为您的 EFI 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p1。格式为&#96;mkfs.fat -F 32 &#x2F;dev&#x2F;xxxxx(分区信息)2. 双系统格式化***tips 格式化格式参照上条***使用 mkfs.ext4[16] 将您的根分区格式化为 ext4 文件系统。请将 &#x2F;dev&#x2F;sda5 更换为您的 root 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p5 如果您忘记了 root 分区名，请输入 fdisk -l。在 Type 一栏里找到 Linux root(x86-64) 对应的 Device 名称。使用 mkfs.ext4 将您的 home 分区格式化为 ext4 文件系统。请将 &#x2F;dev&#x2F;sda6 更换为您的 home 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p6。果您忘记了 home 分区名，请输入 fdisk -l。在 Type 一栏里找到 Linux home 对应的 Device 名称。挂载分区-------1. 全新安装使用 mount将根分区挂载在 &#x2F;mnt 目录下。挂载需要遵循一定的顺序，要先挂载根分区，请注意。请将 &#x2F;dev&#x2F;sda2 更换为您的 root 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p2格式为&#96;mount &#x2F;dev&#x2F;xxxx &#x2F;mnt&#96;随后，使用 mount --mkdir 创建 &#x2F;mnt&#x2F;boot 目录，并将 EFI 分区挂载在 &#x2F;mnt&#x2F;boot 目录下。请将 &#x2F;dev&#x2F;sda1 更换为您的 EFI 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p1。格式为&#96;mount --mkdir &#x2F;dev&#x2F;xxxxx &#x2F;mnt&#x2F;boot&#96;此处，也可以使用 &#x2F;mnt&#x2F;efi 作为挂载点，这需要引导程序的配合，具体的区别见 ArchWiki。最后，挂载 home 分区。请将 &#x2F;dev&#x2F;sda5 更换为您的 home 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p3。格式为&#96;mount --mkdir &#x2F;dev&#x2F;xxx &#x2F;mnt&#x2F;home&#96;2. 双系统挂载使用 mount将根分区挂载在 &#x2F;mnt 目录下。挂载需要遵循一定的顺序，要先挂载根分区，请注意。请将 &#x2F;dev&#x2F;sda5 更换为您的 root 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p5格式为&#96;mount &#x2F;dev&#x2F;xxx &#x2F;mnt&#96;随后，使用 mount --mkdir 创建 &#x2F;mnt&#x2F;efi 目录，并将 EFI 分区挂载在 &#x2F;mnt&#x2F;efi 目录下。这里不选择挂载点为 &#x2F;mnt&#x2F;boot 的目的是减小磁盘空间占用，但是您将只能选择特定的引导程序，如 GRUB。请将 &#x2F;dev&#x2F;sda1 更换为您的 EFI 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p1。格式为&#96;mount --mkdir &#x2F;dev&#x2F;xxx &#x2F;mnt&#x2F;efi&#96;此处，也可以使用 &#x2F;mnt&#x2F;boot 作为挂载点，具体的区别见 ArchWiki。最后，挂载 home 分区。请将 &#x2F;dev&#x2F;sda6 更换为您的 home 分区名，可能是 &#x2F;dev&#x2F;nvme0n1p6。格式为&#96;mount --mkdir &#x2F;dev&#x2F;xxx &#x2F;mnt&#x2F;home&#96;建立交换文件-------------交换文件相当于 Windows 中的虚拟内存，也就是利用硬盘空间充当内存。当内存相对不足时，有部分内存中的内容会交换到硬盘中，从而释放内存。关于 swap 的重要性，有两篇不错的文章，推荐读者阅读 交换文件的大小是个众说纷纭的问题。笔者根据 RedHat 文档，推荐的交换文件大小见下表，笔者使用的公式是**交换文件大小&#x3D;2√2x内存大小**建立交换文件的具体操作方法如下。首先使用 dd 创建交换文件。例如，创建一块 8 GiB （&#x3D;8192 MiB）大小的交换文件&#96;dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;mnt&#x2F;swapfile bs&#x3D;1M count&#x3D;8192 status&#x3D;progress&#96;如果您需要创建其他大小的交换文件，请将 count&#x3D; 后面的数值换成交换文件大小的 MiB 数（GiB 数 x 1024）。然后，修改权限&#96;chmod 0600 &#x2F;mnt&#x2F;swapfile&#96;最后 格式化并启用swapmkswap -U clear &#x2F;mnt&#x2F;swapfileswapon &#x2F;mnt&#x2F;swapfile安装基础包---------终于到了安装环节。我们使用 pacstrap 安装 base，linux，linux-firmware 三个软件包，它们分别是基础包组，linux 内核和驱动程序。此外，如果您使用 2019 年及以后生产的笔记本电脑，可能需要安装 sof-firmware，否则可能没有声音。Arch linux 官方提供了 linux，linux-lts，linux-zen，linux-hardened 内核，但是对于初学者，只推荐使用 linux 内核。&#96;pacstrap -K &#x2F;mnt base linux linux-firmware&#96;生成fstab &#96;genfstab -U &#x2F;mnt &gt;&gt; &#x2F;mnt&#x2F;etc&#x2F;fstab&#96; 记得用cat指令检查是否正确 &#96;cat &#x2F;mnt&#x2F;etc&#x2F;fstab&#96;进入archlinux--------------我们使用 arch-chroot 工具切换到新安装的系统，以后的操作就可以在新安装的系统中完成了&#96;arch-chroot &#x2F;mnt&#96;设置时区和硬件时间------------------时区: &#96;ln -sf &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Shanghai &#x2F;etc&#x2F;localtime&#96;硬件时间: &#96;hwclock --systohc&#96;更改 &#x2F;etc&#x2F;locale.gen--------------------安装vim  &#96;pacman -S vim&#96;文章中介绍。如果您想提前学习 vim 的使用方法，请查看菜鸟教程。首先输入“&#x2F;”，进入搜索功能，输入“en-US.UTF-8”，我们找到了以下一行。#en-US.UTF-8 UTF-8按下Enter，此时光标的位置在这一行的“e”的位置。按方向左键，再输入“x”，将这一行开头的“#”删除。en-US.UTF-8 UTF-8再一次输入“&#x2F;”，进入搜索功能，输入“zh-CN.UTF-8”，按下Enter。按方向左键，再输入“x”，将“#”删除。zh-CN.UTF-8 UTF-8随后输入“:”，进入命令模式，输入“wq”，按下Enter，保存并退出 vim 软件环境。输入如下命令生成locale &#96;locale-gen&#96;我们再使用 vim 创建并编辑 locale.conf，设置 locale &#96;vim &#x2F;etc&#x2F;locale.conf&#96;这是一个空文件。进入 vim 程序环境时，默认进入了命令模式，此时无法插入字符。我们首先按下“i”键，进入插入模式。请输入如下字符。LANG&#x3D;en-US.UTF-8然后按 Esc，退出插入模式。再输入“:”，进入命令模式，输入“wq”，按下Enter，保存并退出 vim 软件环境。网络配置---------请编辑 hostname文件，设置主机名，这将成为您计算机的名字&#96;vim &#x2F;etc&#x2F;hostname&#96;然后，请安装一个网络管理器，笔者推荐使用 NetworkManager&#96;pacman -S networkmanager&#96;NetworkManager 附带一个守护程序。在 Arch Linux 中，守护程序由 systemd 管理。systemd 是非常重要的系统程序，我们在下一篇文章中会详细介绍它的用法。现在我们使用 systemd 设置 NetworkManager 开机自动启动。&#96;systemctl enable NetworkManager.service&#96;设置ROOT密码-----------&gt; root 用户是 Linux 系统中权限最高的用户，有些敏感的操作必须通过 root 用户进行，比如使用 pacman。我们之前进行所有的操作也都是以 root 用户进行的。也正是因为 root 的权限过高，如果使用不当会造成安全问题，所以我们在下一篇文章中会新建一个普通用户来进行日常的操作。在这里我们需要为 root 用户设置一个密码请输入如下命令设置密码***tips:输入的密码不会显示***[root@archiso ~]# passwdNew password:  # 请输入密码，这里不会显示“*”，这是正常现象Retype new password:passwd: password updated successfully&#96;&#96;&#96;安装微码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arch%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">Arch引导程序的安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%90%AF"><span class="toc-text">重启</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" title="ARCHLINUX详细安装教程"><img src="https://img1.imgtp.com/2023/07/02/mIDFkDyH.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ARCHLINUX详细安装教程"/></a><div class="content"><a class="title" href="/2023/07/02/ARCHLINUX%E8%AF%A6%E7%BB%86%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" title="ARCHLINUX详细安装教程">ARCHLINUX详细安装教程</a><time datetime="2023-07-02T05:08:44.000Z" title="发表于 2023-07-02 13:08:44">2023-07-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/07/01/TERMUX%E9%83%A8%E7%BD%B2HEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2-%E4%B8%AD/" title="无题">无题</a><time datetime="2023-07-01T07:49:06.337Z" title="发表于 2023-07-01 15:49:06">2023-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/01/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2-%E4%B8%AD/" title="TERMUX搭建HEXO以及后续部署(中)"><img src="https://img1.imgtp.com/2023/06/30/vD82wXZj.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TERMUX搭建HEXO以及后续部署(中)"/></a><div class="content"><a class="title" href="/2023/07/01/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2-%E4%B8%AD/" title="TERMUX搭建HEXO以及后续部署(中)">TERMUX搭建HEXO以及后续部署(中)</a><time datetime="2023-07-01T03:46:59.000Z" title="发表于 2023-07-01 11:46:59">2023-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/30/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TERMUX搭建HEXO以及后续部署（上）"><img src="https://img1.imgtp.com/2023/06/30/vD82wXZj.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TERMUX搭建HEXO以及后续部署（上）"/></a><div class="content"><a class="title" href="/2023/06/30/TERMUX%E6%90%AD%E5%BB%BAHEXO%E4%BB%A5%E5%8F%8A%E5%90%8E%E7%BB%AD%E9%83%A8%E7%BD%B2%EF%BC%88%E4%B8%8A%EF%BC%89/" title="TERMUX搭建HEXO以及后续部署（上）">TERMUX搭建HEXO以及后续部署（上）</a><time datetime="2023-06-30T12:38:44.000Z" title="发表于 2023-06-30 20:38:44">2023-06-30</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://img1.imgtp.com/2023/07/02/mIDFkDyH.png')"><div id="footer-wrap"><div class="copyright">&copy;2023 By 在北方</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://north12359.gitee.io/">blog</a></div><div id="running-time"><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2023,06,30,13,0,0)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="698720887" data-server="netease" data-type="playlist" data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true" ></div><script src="/js/foot.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomln');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '2');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomln');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://unpkg.zhimg.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalender.akilar.top/api?north12359",['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'],'north12359')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"live2d-widget-model-haru_01"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>